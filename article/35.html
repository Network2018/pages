<!-- build time:Sat May 05 2018 01:46:53 GMT+0800 (中国标准时间) --><!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><link href="https://static.sometimesnaive.org:9004/deps/imgs/favicon.ico" type="image/x-icon" rel="icon"><title>Hexo 搬迁记（二） 插件篇 | 南琴浪博客</title><link href="https://static.sometimesnaive.org:9004/deps/css/style.min.css" type="text/css" rel="stylesheet"><script src="https://static.sometimesnaive.org:9004/deps/js/jquery.min.js" type="application/javascript"></script><link href="https://static.sometimesnaive.org:9004/deps/css/nprogress.min.css" type="text/css" rel="stylesheet"><script src="https://static.sometimesnaive.org:9004/deps/js/nprogress.min.js" type="application/javascript"></script><link href="https://static.sometimesnaive.org:9004/deps/css/prism.min.css" type="text/css" rel="stylesheet"><script src="https://static.sometimesnaive.org:9004/deps/js/prism.min.js" type="application/javascript"></script><link href="https://static.sometimesnaive.org:9004/deps/css/gitment.min.css" type="text/css" rel="stylesheet"><script src="https://static.sometimesnaive.org:9004/deps/js/gitment.min.js" type="application/javascript"></script></head><body><header class="header fixed-header"><div class="header-container"><a class="home-link" href="/">南琴浪博客</a><ul class="right-list"><li class="list-item"><a href="/" class="item-link">Home</a></li><li class="list-item"><a href="/archive/" class="item-link">Archive</a></li><li class="list-item"><a href="/portal/atom.xml" class="item-link">RSS</a></li><li class="list-item"><a href="/portal/friendly-links" class="item-link">Links</a></li></ul><div class="menu-mask"><ul class="menu-list"><li class="menu-item"><a href="/" class="menu-link">Home</a></li><li class="menu-item"><a href="/archive/" class="menu-link">Archive</a></li><li class="menu-item"><a href="/portal/atom.xml" class="menu-link">RSS</a></li><li class="menu-item"><a href="/portal/friendly-links" class="menu-link">Links</a></li></ul></div></div></header><div id="article-banner"><h2>Hexo 搬迁记（二） 插件篇</h2><p class="post-date">12/10/2017</p></div><main class="app-body flex-box"><article class="post-article"><section class="markdown-content"><p>这一篇来介绍下本站正在用的 Hexo 插件。分为 Hexo 官网的插件和我自己写入主题的插件两部分。<br><a id="more"></a></p><h2 id="官网的插件"><a href="#官网的插件" class="headerlink" title="官网的插件"></a>官网的插件</h2><p>本站 <code>npm</code> 安装的插件不多，包含下列几项：</p><h3 id="sitemap"><a href="#sitemap" class="headerlink" title="sitemap"></a>sitemap</h3><p>这是一款用于生成站点地图 <code>sitemap</code> 的插件</p><pre><code class="language-bash">npm install --save hexo-generator-sitemap
</code></pre><pre><code class="language-yaml">sitemap:
  path: sitemap.xml
</code></pre><h3 id="feed"><a href="#feed" class="headerlink" title="feed"></a>feed</h3><p>这是一款用于生成 <code>RSS</code> 订阅文件的插件</p><pre><code class="language-bash">npm install --save hexo-generator-feed
</code></pre><pre><code class="language-yaml"># 我的设置是不显示任何正文
feed:
  type: atom
  path: atom.xml
  content: false
  content_limit: 0
</code></pre><h3 id="word-count"><a href="#word-count" class="headerlink" title="word-count"></a>word-count</h3><p>这是一款<code>文章字数统计</code>的插件，效果可以参见本站，样式可以自己根据 CSS 定义</p><pre><code class="language-bash">npm install --save hexo-wordcount
</code></pre><p>安装完成后，在你的 <code>article.ejs</code> 中插入例如：</p><pre><code class="language-html">&lt;div class=&quot;article-wordcount&quot;&gt;
  本文总计 &lt;%= wordcount(post.content) %&gt; 字，预计阅读 &lt;%= min2read(post.content, {cn: 100, en: 50}) %&gt; 分钟
&lt;/div&gt;
</code></pre><h2 id="写入主题的插件"><a href="#写入主题的插件" class="headerlink" title="写入主题的插件"></a>写入主题的插件</h2><p>接下来所讲的插件，手动写进 <code>ejs</code> 就没毛病了。因为我不怎么需要变量，所以都直接写进了 layout，而不是调用 config.yml。</p><h3 id="Follow-Me"><a href="#Follow-Me" class="headerlink" title="Follow Me"></a>Follow Me</h3><p>站点侧边栏的 <code>Follow Me</code>，我使用了 <code>FontAwesome</code> 来引入图标，这里只介绍 layout 部分，关于 css 部分我会在之后的 <a href="https://sometimesnaive.org/article/41#Follow-Me" rel="external nofollow noopener noreferrer" target="_blank">主题篇</a> 进行介绍。</p><pre><code class="language-html">&lt;div class=&quot;widget-wrap&quot;&gt;
&lt;h3 class=&quot;widget-title&quot;&gt;Follow Me&lt;/h3&gt;
  &lt;div class=&quot;widget social&quot;&gt;
    &lt;a class=&quot;telegram&quot; aria-hidden=&quot;true&quot;  href=&quot;https://t.me/SometimesNaiveReporter&quot; title=&quot;Telegram&quot; target=&quot;_blank&quot;&gt;&lt;/a&gt;
    &lt;a class=&quot;twitter&quot; aria-hidden=&quot;true&quot;  href=&quot;https://twitter.com/SinderyMinami&quot; title=&quot;Twitter&quot; target=&quot;_blank&quot;&gt;&lt;/a&gt;
    &lt;a class=&quot;gplus&quot; aria-hidden=&quot;true&quot;  href=&quot;https://plus.google.com/+SinderyMinami&quot; title=&quot;Google+&quot; target=&quot;_blank&quot;&gt;&lt;/a&gt;
    &lt;a class=&quot;github&quot; aria-hidden=&quot;true&quot;  href=&quot;https://github.com/nanqinlang&quot; title=&quot;Github&quot; target=&quot;_blank&quot;&gt;&lt;/a&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre><h3 id="分类目录"><a href="#分类目录" class="headerlink" title="分类目录"></a>分类目录</h3><pre><code class="language-html">&lt;div class=&quot;widget-wrap&quot;&gt;
 &lt;h3 class=&quot;widget-title&quot;&gt;Category&lt;/h3&gt;
  &lt;div class=&quot;widget catagory&quot;&gt;
    &lt;%- list_categories({show_count: theme.show_count}) %&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre><h3 id="友情链接"><a href="#友情链接" class="headerlink" title="友情链接"></a>友情链接</h3><pre><code class="language-html">&lt;div class=&quot;widget-wrap&quot;&gt;
 &lt;h3 class=&quot;widget-title&quot;&gt;Links&lt;/h3&gt;
  &lt;div class=&quot;widget friendlink&quot;&gt;
    &lt;a href=&quot;https://liyuans.com&quot; target=&quot;_blank&quot;&gt;Leonn的博客&lt;/a&gt;&lt;br/&gt;
    &lt;a href=&quot;https://www.sabia.cc&quot; target=&quot;_blank&quot;&gt;Sabia科学研究所&lt;/a&gt;&lt;br/&gt;
    ...
  &lt;/div&gt;
&lt;/div&gt;
</code></pre><h3 id="评论系统"><a href="#评论系统" class="headerlink" title="评论系统"></a>评论系统</h3><p>本博客采用 <a href="https://github.com/imsun/gitment" rel="external nofollow noopener noreferrer" target="_blank"><code>gitment</code></a> 作为评论系统。我在原作者的样式上进行了修改，并使用了自建验证服务器。我修改后的可以看 <a href="https://github.com/nanqinlang-mogic/gitment" rel="external nofollow noopener noreferrer" target="_blank">这里</a>。要使用 gitment，在你的 <code>article.ejs</code> 中引入类似以下：</p><pre><code class="language-html">&lt;% if (!index){ %&gt;
&lt;% if (post.comments){ %&gt;
 &lt;!-- gitment begin --&gt;
   &lt;div class=&quot;gitment-render&quot; id=&quot;gitment-render&quot;&gt;
     &lt;script src=&quot;/dependences/gitment/dist/gitment.browser.js&quot;&gt;&lt;/script&gt;
     &lt;script&gt;
       var gitment = new Gitment({
       //id: &#39;location.href&#39;,//
       owner: &#39;nanqinlang&#39;,
       repo: &#39;sometimesnaive.org&#39;,
       oauth: {
       client_id: &#39;b0612de652324ab34d7e&#39;,
       client_secret: &#39;c2bd4df3c947097d2eee5f16f120d50458314dd0&#39;,
       }
       })
       gitment.render(&#39;gitment-render&#39;)
     &lt;/script&gt;
   &lt;/div&gt;
 &lt;!-- gitment end --&gt;
&lt;% } %&gt;
&lt;% } %&gt;
</code></pre><h3 id="Google-Analytics"><a href="#Google-Analytics" class="headerlink" title="Google Analytics"></a>Google Analytics</h3><p>依旧是在 <code>article.ejs</code> 中引入，其中 <code>UA-111111111-1</code> 替换为你自己的 Google Analytics 识别码。</p><pre><code class="language-html">&lt;script&gt;
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga(&#39;create&#39;, &#39;UA-111111111-1&#39;, &#39;auto&#39;);
  ga(&#39;send&#39;, &#39;pageview&#39;);
&lt;/script&gt;
&lt;script async src=&#39;https://www.google-analytics.com/analytics.js&#39;&gt;&lt;/script&gt;
</code></pre></section><br><div class="article-footer"><br><p>本文可能过时失效，若需更新，请留言</p><p>本博客文章均为原创，转载请注明来源</p></div><div class="nav-container"><a class="nav-right" href="/article/34.html">Nginx 反代 Google（进阶篇） <span class="nav-arrow">→</span> </a><a class="nav-left" href="/article/36.html"><span class="nav-arrow">← </span>Nginx 启用 proxy_cache 缓存</a></div><div id="comments"></div></article><aside class="catalog-container"><div class="toc-main"><strong class="toc-title">Catalog</strong><ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#官网的插件"><span class="toc-nav-text">官网的插件</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#sitemap"><span class="toc-nav-text">sitemap</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#feed"><span class="toc-nav-text">feed</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#word-count"><span class="toc-nav-text">word-count</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#写入主题的插件"><span class="toc-nav-text">写入主题的插件</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Follow-Me"><span class="toc-nav-text">Follow Me</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#分类目录"><span class="toc-nav-text">分类目录</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#友情链接"><span class="toc-nav-text">友情链接</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#评论系统"><span class="toc-nav-text">评论系统</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Google-Analytics"><span class="toc-nav-text">Google Analytics</span></a></li></ol></li></ol></div></aside></main><script>!function(){var e="https://static.sometimesnaive.org:9004/deps/imgs/banner.jpg";$("#article-banner").css({"background-image":"url("+e+")"}),$(".header").removeClass("fixed-header")}()</script><script>(function(){
    var gitmentConfig = "nanqinlang"
    if (gitmentConfig !== 'undefined') {
        var gitment = new Gitment({
            id: "35",
            owner: "nanqinlang",
            repo: "sometimesnaive.org",
            oauth: {client_id: "b0612de512484ab34c7a", client_secret: "c2bc4cd3c947097d2ccc4c16f120d50458314dd0"},
            theme: {render(state, instance){const container = document.createElement('div');container.lang="en-US";container.className='gitment-container gitment-root-container';container.appendChild(instance.renderHeader(state, instance));container.appendChild(instance.renderEditor(state, instance));container.appendChild(instance.renderComments(state, instance));container.appendChild(instance.renderFooter(state, instance));return container;}}
        })
        gitment.render(document.getElementById('comments'))
    }
})();</script><div class="scroll-top"><span class="arrow-icon"></span></div><footer class="app-footer"><p class="copyright" align="center">&copy; 2017 - 2018 南琴浪博客 <a>(sometimesnaive.org)<a></a></a></p></footer><script src="https://static.sometimesnaive.org:9004/deps/js/function.min.js" type="application/javascript"></script><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-108266909-1","auto"),ga("send","pageview")</script><script async src="https://www.google-analytics.com/analytics.js" type="application/javascript"></script></body></html><!-- rebuild by neat -->