<!-- build time:Thu May 03 2018 22:55:47 GMT+0800 (中国标准时间) --><!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><link href="https://static.sometimesnaive.org:9004/deps/imgs/favicon.ico" type="image/x-icon" rel="icon"><title>Hexo 搬迁记（三） 主题篇 | 南琴浪博客</title><link href="https://static.sometimesnaive.org:9004/deps/css/style.min.css" type="text/css" rel="stylesheet"><script src="https://static.sometimesnaive.org:9004/deps/js/jquery.min.js" type="application/javascript"></script><link href="https://static.sometimesnaive.org:9004/deps/css/nprogress.min.css" type="text/css" rel="stylesheet"><script src="https://static.sometimesnaive.org:9004/deps/js/nprogress.min.js" type="application/javascript"></script><link href="https://static.sometimesnaive.org:9004/deps/css/prism.min.css" type="text/css" rel="stylesheet"><script src="https://static.sometimesnaive.org:9004/deps/js/prism.min.js" type="application/javascript"></script><link href="https://static.sometimesnaive.org:9004/deps/css/gitment.min.css" type="text/css" rel="stylesheet"><script src="https://static.sometimesnaive.org:9004/deps/js/gitment.min.js" type="application/javascript"></script></head><body><header class="header fixed-header"><div class="header-container"><a class="home-link" href="/">南琴浪博客</a><ul class="right-list"><li class="list-item"><a href="/" class="item-link">Home</a></li><li class="list-item"><a href="/archive/" class="item-link">Archive</a></li><li class="list-item"><a href="/portal/atom.xml" class="item-link">RSS</a></li><li class="list-item"><a href="/portal/friendly-links" class="item-link">Links</a></li></ul><div class="menu-mask"><ul class="menu-list"><li class="menu-item"><a href="/" class="menu-link">Home</a></li><li class="menu-item"><a href="/archive/" class="menu-link">Archive</a></li><li class="menu-item"><a href="/portal/atom.xml" class="menu-link">RSS</a></li><li class="menu-item"><a href="/portal/friendly-links" class="menu-link">Links</a></li></ul></div></div></header><div id="article-banner"><h2>Hexo 搬迁记（三） 主题篇</h2><p class="post-date">12/27/2017</p></div><main class="app-body flex-box"><article class="post-article"><section class="markdown-content"><p>在之前挖坑的 <a href="https://sometimesnaive.org/article/14" rel="external nofollow noopener noreferrer" target="_blank">Hexo 搬迁记系列一 安装篇</a> <a href="https://sometimesnaive.org/article/35" rel="external nofollow noopener noreferrer" target="_blank">Hexo 搬迁记系列二 插件篇</a> 中，我分别介绍了本博客所使用的平台和插件。这次的系列三就介绍本博客的主题。<br><a id="more"></a></p><p>本博客的主题基于 Hexo 默认主题 <a href="https://github.com/hexojs/hexo-theme-landscape" rel="external nofollow noopener noreferrer" target="_blank"><code>LandScape</code></a>，在原主题的基础上做了一些修改，并增加了一些插件。</p><p>修改大致分为：布局（layout）、样式（styl）、插件（widget）三部分，插件部分已在前面的插件篇进行过介绍。本文介绍 <code>布局</code> 和 <code>样式</code> 部分。</p><p>2017-12-26：今天收到了私戳，被夸了一句“博客好漂亮”，内心还是有点小开心的，虽然只是一点微小的工作。</p><h2 id="布局（layout）"><a href="#布局（layout）" class="headerlink" title="布局（layout）"></a>布局（layout）</h2><p>在 layout 上面，我改的东东大概有点多，并且我也不记得改了哪些了，所以先把能回忆起来的写出来。</p><h3 id="文章目录"><a href="#文章目录" class="headerlink" title="文章目录"></a>文章目录</h3><p>在 <code>article.ejs</code> 中，Hexo 提供了一个生成文章分级目录的 <code>toc</code> 函数，使用 <code>&lt;%- toc(post.content) %&gt;</code> 即可调用它。</p><pre><code class="language-html">&lt;div class=&quot;article-catalogue&quot;&gt;
  &lt;strong class=&quot;article-catalogue&quot;&gt;文章目录&lt;/strong&gt;
  &lt;%- toc(post.content, {list_number: false}) %&gt;
&lt;/div&gt;
</code></pre><h3 id="文末版权声明"><a href="#文末版权声明" class="headerlink" title="文末版权声明"></a>文末版权声明</h3><p>在 <code>article.ejs</code> 中引入一个 <code>if (post.excerpt &amp;&amp; !index)</code> 的判断，满足条件就插入指定段。</p><pre><code class="language-html">&lt;footer class=&quot;article-footer&quot;&gt;
 &lt;% if (post.excerpt &amp;&amp; !index){ %&gt;
   &lt;strong class=&quot;article-outdate&quot;&gt;本文可能过时失效，若需更新，请留言&lt;/strong&gt;
  &lt;br/&gt;
   &lt;strong class=&quot;article-copyright&quot;&gt;本博客文章均为原创，转载请注明来源&lt;/strong&gt;
 &lt;% } %&gt;
 &lt;%- partial(&#39;post/tag&#39;) %&gt;
&lt;/footer&gt;
</code></pre><h3 id="底部版权信息"><a href="#底部版权信息" class="headerlink" title="底部版权信息"></a>底部版权信息</h3><p>在 <code>footer.ejs</code> 中引入以下：</p><pre><code class="language-html">&lt;footer id=&quot;footer&quot;&gt;
  &lt;% if (theme.sidebar === &#39;bottom&#39;){ %&gt;
    &lt;%- partial(&#39;_partial/sidebar&#39;) %&gt;
  &lt;% } %&gt;
  &lt;div class=&quot;outer&quot;&gt;
    &lt;div id=&quot;footer-info&quot; class=&quot;inner&quot; align=&quot;left&quot;&gt;
      © 2017 - &lt;a href=&quot;https://sometimesnaive.org/&quot;&gt;南琴浪博客&lt;/a&gt; - 京 ICP 备 15046286 号
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/footer&gt;
</code></pre><h2 id="样式（styl）"><a href="#样式（styl）" class="headerlink" title="样式（styl）"></a>样式（styl）</h2><p>布局定下来了，接下来就是页面样式（css）的问题了。</p><h3 id="Follow-Me"><a href="#Follow-Me" class="headerlink" title="Follow Me"></a>Follow Me</h3><p>在前面的 <a href="https://sometimesnaive.org/article/35#Follow-Me" rel="external nofollow noopener noreferrer" target="_blank">插件篇</a> 中，我提到过，我使用了 <code>FontAwesome</code> 来引入图标。在那篇文章中，我介绍了 layout 部分。这里继续介绍 css 的部分。</p><p>首先在 <code>_variables.styl</code> 中定义字体 <code>FontAwesome</code>：</p><pre><code class="language-css">// FontAwesome
font-icon = FontAwesome
font-icon-path = &quot;FontAwesome/fontawesome-webfont&quot;
font-icon-version = &quot;4.0.3&quot;
</code></pre><p>然后在 <code>style.styl</code> 中定义字体的相关属性：</p><pre><code class="language-css">@font-face
  font-family: FontAwesome
  font-style: normal
  font-weight: normal
  src: url(font-icon-path + &quot;.eot?v=#&quot; + font-icon-version)
  src: url(font-icon-path + &quot;.eot?#iefix&amp;v=#&quot; + font-icon-version) format(&quot;embedded-opentype&quot;),
       url(font-icon-path + &quot;.woff?v=#&quot; + font-icon-version) format(&quot;woff&quot;),
       url(font-icon-path + &quot;.ttf?v=#&quot; + font-icon-version) format(&quot;truetype&quot;),
       url(font-icon-path + &quot;.svg#fontawesomeregular?v=#&quot; + font-icon-version) format(&quot;svg&quot;)
</code></pre><p>再在 <code>widget.styl</code> 中定义 Follow Me 插件的样式，就完成了：</p><pre><code class="language-css">.social
    text-align: center !important
    font-size: 2.2em !important
    line-height:1em !important
    margin: auto    //块的大小

    a
     color:#50504f !important
     text-decoration: none !important
    .telegram:before
        content: &quot;\f2c6&quot; !important
        @extend $social-block
    .telegram:hover
        color:#333
        cursor: pointer
        background-color: color-background
    .twitter:before
        content: &quot;\f081&quot; !important
        @extend $social-block
    .twitter:hover
        color:#333
        cursor: pointer
        background-color: color-background
    .gplus:before
        content: &quot;\f0d4&quot; !important
        @extend $social-block
    .gplus:hover
        color:#333
        cursor: pointer
        background-color: color-background
    .github:before
        content: &quot;\f092&quot; !important
        @extend $social-block
    .github:hover
        color:#333
        cursor: pointer
        background-color: color-background
</code></pre><h3 id="分类目录"><a href="#分类目录" class="headerlink" title="分类目录"></a>分类目录</h3><p>在 <code>widget.styl</code> 中定义 分类目录 插件的样式：</p><pre><code class="language-css">.category
    font-size: 15px
    margin: auto    //块的大小
    text-align: left
</code></pre><h3 id="友情链接"><a href="#友情链接" class="headerlink" title="友情链接"></a>友情链接</h3><p>在 <code>widget.styl</code> 中定义 友情链接 插件的样式：</p><pre><code class="language-css">.friendlink
    font-size: 15px
    margin: auto    //块的大小
    text-align: left
</code></pre><h3 id="评论系统"><a href="#评论系统" class="headerlink" title="评论系统"></a>评论系统</h3><p>在前面的 <a href="https://sometimesnaive.org/article/35#评论系统" rel="external nofollow noopener noreferrer" target="_blank">插件篇</a> 中，我提到过，本博客采用 <code>gitment</code> 作为评论系统。我对 gitment 的样式做了一些修改。</p><p>我修改了 gitment 默认的 default.css 样式，对以下部分进行了修改，然后将整个文件单独定义为一个 <code>gitment.styl</code>：</p><pre><code class="language-css">// 这是 gitment 整体边框的效果
.gitment-render {
  background: #fff;
  margin: auto;

  box-shadow: 1px 2px 3px #ddd;
  border: 1px solid color-border;
  border-radius: 5px;
}

// 这是 gitment 内的默认字体
.gitment-container {
  font-family: font-sans;
  font-size: 15px;
  line-height: 1.5em;
  color: color-default;
  word-wrap: break-word;
}

// 引用块的颜色
.gitment-markdown blockquote {
  padding: 0 1em;
  color: #6a737d;
  border-left: 0.25em solid #ffe4e1;
}

// 其中 background-color 定义了 highlight 背景色
.gitment-markdown code {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 95%;
  background-color: #ffe4e1;
  border-radius: 0;
}
</code></pre><p>然后，将 gitment.styl 引入到 <code>style.styl</code> 中：</p><pre><code class="language-css">if sidebar
  @import &quot;_partial/sidebar&quot;

  @import &quot;_partial/widget&quot;    //我添加的 widget 样式
  @import &quot;_partial/gitment&quot;  //我添加的 gitment 样式
</code></pre><h3 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h3><p>在 <code>_variables.styl</code> 中找到字体的设定：</p><pre><code class="language-css">// Font
// font-sans = &quot;Helvetica Neue&quot;, &quot;Helvetica&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Source Han Sans CN&quot;, &quot;WenQuanYi Micro Hei&quot;, Arial, sans-serif
font-sans = sans-serif
font-arial = Arial
// font-serif = Georgia, &quot;Times New Roman&quot;, serif
font-serif = serif
// font-mono = Menlo, &quot;Source Code Pro&quot;, Monaco, Consolas, Consolas, monospace
font-mono = Menlo

// Font Dimension
font-size = 15px    // 字体大小
line-height = 1.5em
line-height-title = 1.0em
</code></pre><p>然后在 <code>article.styl</code> 中定义字体属性：</p><pre><code class="language-css">//字数计数插件
.article-wordcount
  font-size: 15px
  font-weight: bold
  color: color-grey

//文章目录
.article-catalogue
  font-size: 15px
  //font-weight: bold
  color: color-grey

//版权声明
.article-copyright
  font-size: 15px
  font-weight: bold
  color: color-grey

//过时声明
.article-outdate
  font-size: 15px
  font-weight: bold
  color: color-grey

.article-entry
  //文章的标题样式
  h1
    font-size: 2em
  h2
    font-size: 1.6em    //标题大小
    border-bottom: 1.5px #bbb solid;    //标题下划线
  h3
    font-size: 1.2em
    //border-bottom: 1.4px #ccc solid;
  ...
  blockquote    //修改引用块样式
    font-family: font-arial    //font-sans  //引用部分采用和正文（sans）不同的字体（arial）
    font-size: 15px
    margin: line-height 10px    //引用块的偏移量
    text-align: left // 左对齐

// 文章下面的 Next/Previous 按钮
#article-nav
  clearfix()
  position: relative
  @media mq-normal
    margin: block-margin 0
    &amp;:before
      absolute-center(8px)
      content: &quot;&quot;
      border-radius: 50%
      background: color-grey //“下一篇/上一篇”功能的“圆点”的颜色
      //box-shadow: 0 1px 2px #fff

.article-nav-link-wrap
  text-decoration: none
  text-shadow: 0 1px #fff
  color: color-grey //“下一篇/上一篇”功能的“文章标题”的颜色
  box-sizing: border-box
  margin-top: block-margin
  text-align: center
  display: block
  &amp;:hover
    color: color-default
  @media mq-normal
    width: 50%
    margin-top: 0

.article-nav-caption
  text-transform: uppercase
  letter-spacing: 2px
  color: color-grey //“下一篇/上一篇”功能的“Next/Previous”的颜色
  line-height: 1em
  //font-weight: bold    //字体加粗
  #article-nav-newer &amp;
    margin-right: -2px
</code></pre><h3 id="代码高亮"><a href="#代码高亮" class="headerlink" title="代码高亮"></a>代码高亮</h3><p>在 <code>highlight.styl</code> 中修改了以下属性：</p><pre><code class="language-css">highlight-background = #ffe4e1    //代码高亮块的背景色
highlight-foreground = color-default    //代码块的字体颜色

$code-block
  background: highlight-background
  margin: auto    //代码块不左右顶格，而是与两侧保持一定间距

$line-numbers
  color: highlight-foreground
  font-size: 0em    //行号大小
  letter-spacing: 0px    //字符或字母之间的间隔
</code></pre><h3 id="页面颜色"><a href="#页面颜色" class="headerlink" title="页面颜色"></a>页面颜色</h3><p>在 <code>_variables.styl</code> 中修改了以下属性：</p><pre><code class="language-css">// Colors
color-default = #555
color-grey = #999
color-border = #ddd    //更改边框的颜色
color-link = #258fb8    //更改连接的颜色
color-background = #ffe4e1    //页面的背景颜色
color-sidebar-text = #777    //貌似当时修改的这个吧 //更改侧边栏链接的颜色
color-widget-background = #fff    //边栏插件的背景颜色
color-widget-border = #ddd    //边栏插件的边框颜色
color-footer-background = #ffe4e1    //页面底部的背景颜色
color-mobile-nav-background = #191919
color-twitter = #00aced
color-facebook = #3b5998
color-pinterest = #cb2027
color-google = #dd4b39
</code></pre><h3 id="页面间距"><a href="#页面间距" class="headerlink" title="页面间距"></a>页面间距</h3><p>在 <code>_variables.styl</code> 中修改了以下属性：</p><pre><code class="language-css">// Layout
block-margin = 60px    //模块之间的间距
article-padding = 20px    // 文章内缩进
mobile-nav-width = 280px
main-column = 12    //文章的宽度
sidebar-column = 4    //边栏插件的空行
</code></pre></section><br><div class="article-footer"><br><p>本文可能过时失效，若需更新，请留言</p><p>本博客文章均为原创，转载请注明来源</p></div><div class="nav-container"><a class="nav-right" href="/article/40.html">Nginx 启用 GZip 压缩 <span class="nav-arrow">→</span> </a><a class="nav-left" href="/article/42.html"><span class="nav-arrow">← </span>Nginx 的 timeout 配置</a></div><div id="comments"></div></article><aside class="catalog-container"><div class="toc-main"><strong class="toc-title">Catalog</strong><ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#布局（layout）"><span class="toc-nav-text">布局（layout）</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#文章目录"><span class="toc-nav-text">文章目录</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#文末版权声明"><span class="toc-nav-text">文末版权声明</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#底部版权信息"><span class="toc-nav-text">底部版权信息</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#样式（styl）"><span class="toc-nav-text">样式（styl）</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Follow-Me"><span class="toc-nav-text">Follow Me</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#分类目录"><span class="toc-nav-text">分类目录</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#友情链接"><span class="toc-nav-text">友情链接</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#评论系统"><span class="toc-nav-text">评论系统</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#字体"><span class="toc-nav-text">字体</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#代码高亮"><span class="toc-nav-text">代码高亮</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#页面颜色"><span class="toc-nav-text">页面颜色</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#页面间距"><span class="toc-nav-text">页面间距</span></a></li></ol></li></ol></div></aside></main><script>!function(){var e="https://static.sometimesnaive.org:9004/deps/imgs/banner.jpg";$("#article-banner").css({"background-image":"url("+e+")"}),$(".header").removeClass("fixed-header")}()</script><script>(function(){
    var gitmentConfig = "nanqinlang"
    if (gitmentConfig !== 'undefined') {
        var gitment = new Gitment({
            id: "41",
            owner: "nanqinlang",
            repo: "sometimesnaive.org",
            oauth: {client_id: "b0612de512484ab34c7a", client_secret: "c2bc4cd3c947097d2ccc4c16f120d50458314dd0"},
            theme: {render(state, instance){const container = document.createElement('div');container.lang="en-US";container.className='gitment-container gitment-root-container';container.appendChild(instance.renderHeader(state, instance));container.appendChild(instance.renderEditor(state, instance));container.appendChild(instance.renderComments(state, instance));container.appendChild(instance.renderFooter(state, instance));return container;}}
        })
        gitment.render(document.getElementById('comments'))
    }
})();</script><div class="scroll-top"><span class="arrow-icon"></span></div><footer class="app-footer"><p class="copyright" align="center">&copy; 2017 - 2018 南琴浪博客 <a>(sometimesnaive.org)<a></a></a></p></footer><script src="https://static.sometimesnaive.org:9004/deps/js/function.min.js" type="application/javascript"></script><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-108266909-1","auto"),ga("send","pageview")</script><script async src="https://www.google-analytics.com/analytics.js" type="application/javascript"></script></body></html><!-- rebuild by neat -->