<!-- build time:Sat May 05 2018 01:46:53 GMT+0800 (中国标准时间) --><!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><link href="https://static.sometimesnaive.org:9004/deps/imgs/favicon.ico" type="image/x-icon" rel="icon"><title>开始使用无特性博客 | 南琴浪博客</title><link href="https://static.sometimesnaive.org:9004/deps/css/style.min.css" type="text/css" rel="stylesheet"><script src="https://static.sometimesnaive.org:9004/deps/js/jquery.min.js" type="application/javascript"></script><link href="https://static.sometimesnaive.org:9004/deps/css/nprogress.min.css" type="text/css" rel="stylesheet"><script src="https://static.sometimesnaive.org:9004/deps/js/nprogress.min.js" type="application/javascript"></script><link href="https://static.sometimesnaive.org:9004/deps/css/prism.min.css" type="text/css" rel="stylesheet"><script src="https://static.sometimesnaive.org:9004/deps/js/prism.min.js" type="application/javascript"></script><link href="https://static.sometimesnaive.org:9004/deps/css/gitment.min.css" type="text/css" rel="stylesheet"><script src="https://static.sometimesnaive.org:9004/deps/js/gitment.min.js" type="application/javascript"></script></head><body><header class="header fixed-header"><div class="header-container"><a class="home-link" href="/">南琴浪博客</a><ul class="right-list"><li class="list-item"><a href="/" class="item-link">Home</a></li><li class="list-item"><a href="/archive/" class="item-link">Archive</a></li><li class="list-item"><a href="/portal/atom.xml" class="item-link">RSS</a></li><li class="list-item"><a href="/portal/friendly-links" class="item-link">Links</a></li></ul><div class="menu-mask"><ul class="menu-list"><li class="menu-item"><a href="/" class="menu-link">Home</a></li><li class="menu-item"><a href="/archive/" class="menu-link">Archive</a></li><li class="menu-item"><a href="/portal/atom.xml" class="menu-link">RSS</a></li><li class="menu-item"><a href="/portal/friendly-links" class="menu-link">Links</a></li></ul></div></div></header><div id="article-banner"><h2>开始使用无特性博客</h2><p class="post-date">03/25/2018</p></div><main class="app-body flex-box"><article class="post-article"><section class="markdown-content"><p>本文记述即日起本博客所开的那些倒车。<br><a id="more"></a></p><p>因为本博客最近一段时间移动端访问会报错 err_spdy_protocol_error 并调试无果，可以判断是启用 http/2 导致的。</p><p>为了解决这毛病，我决定趁着这机会顺便也移除一些其它特性。</p><h2 id="TLS-1-3"><a href="#TLS-1-3" class="headerlink" title="TLS 1.3"></a>TLS 1.3</h2><p>本博客原本使用 openssl draft 18 以启用 TLS 1.3，而现在已改用 <code>LibreSSL</code> 并取消了 TLS 1.3 特性。</p><p>关于 LibreSSL，可以看我的 <a href="https://sometimesnaive.org/article/65" rel="external nofollow noopener noreferrer" target="_blank">这篇文章</a></p><p>关于 TLS 1.3，可以看我的 <a href="https://sometimesnaive.org/article/3" rel="external nofollow noopener noreferrer" target="_blank">这篇文章</a></p><h2 id="HTTP-2"><a href="#HTTP-2" class="headerlink" title="HTTP/2"></a>HTTP/2</h2><p>本博客现已取消 http/2 特性。</p><p>关于 http/2，可以看我的 <a href="https://sometimesnaive.org/article/56" rel="external nofollow noopener noreferrer" target="_blank">这篇文章</a></p><h2 id="ECC-RSA-双证书"><a href="#ECC-RSA-双证书" class="headerlink" title="ECC/RSA 双证书"></a>ECC/RSA 双证书</h2><p>发现双证书没什么用，就趁着这次将 Let’s Encrypt 更换为 <code>COMODO ECC Domain Validation CA</code> 的机会，撤下了 RSA 证书。</p><p>关于双证书，可以看我的 <a href="https://sometimesnaive.org/article/18" rel="external nofollow noopener noreferrer" target="_blank">这篇文章</a></p><h2 id="Certificate-Transparancy"><a href="#Certificate-Transparancy" class="headerlink" title="Certificate Transparancy"></a>Certificate Transparancy</h2><p>启用了 LibreSSL 是不能同时编译 ngx_ct_module 的，本站不再支持 TLS 拓展启用 CT 的特性。当然，因为启用了 Comodo 证书，是自带 CT 的，所以该特性本站依然保留。</p><p>关于 CT，可以看我的 <a href="https://sometimesnaive.org/article/15" rel="external nofollow noopener noreferrer" target="_blank">这篇文章</a></p><h2 id="HTTP-Public-Key-Pinning"><a href="#HTTP-Public-Key-Pinning" class="headerlink" title="HTTP Public Key Pinning"></a>HTTP Public Key Pinning</h2><p>从 Let’s Encrypt 更换到了 COMODO，那么 HPKP 的 pin-sha256 值肯定要更改。然而 HPKP 因为其有一定安全隐患，本博客现已取消该特性。</p><p>关于 HPKP，可以看我的 <a href="https://sometimesnaive.org/article/9" rel="external nofollow noopener noreferrer" target="_blank">这篇文章</a></p><h2 id="多余的加密套件"><a href="#多余的加密套件" class="headerlink" title="多余的加密套件"></a>多余的加密套件</h2><p>现在只启用 ECC 证书和 TLS 1.2 了，那么就能移除用不到的加密套件（不考虑对旧设备的兼容性），只需要保留以下三个 cipher：</p><pre><code class="language-nginx">ssl_protocols TLSv1.2;
ssl_ciphers   &#39;ECDHE-ECDSA-AES128-GCM-SHA256 ECDHE-ECDSA-CHACHA20-POLY1305 ECDHE-ECDSA-AES256-GCM-SHA384&#39;;
</code></pre></section><br><div class="article-footer"><br><p>本文可能过时失效，若需更新，请留言</p><p>本博客文章均为原创，转载请注明来源</p></div><div class="nav-container"><a class="nav-right" href="/article/65.html">开始使用 LibreSSL <span class="nav-arrow">→</span> </a><a class="nav-left" href="/article/67.html"><span class="nav-arrow">← </span>RustRssBot - Telegram RSS Bot</a></div><div id="comments"></div></article><aside class="catalog-container"><div class="toc-main"><strong class="toc-title">Catalog</strong><ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#TLS-1-3"><span class="toc-nav-text">TLS 1.3</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#HTTP-2"><span class="toc-nav-text">HTTP/2</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#ECC-RSA-双证书"><span class="toc-nav-text">ECC/RSA 双证书</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Certificate-Transparancy"><span class="toc-nav-text">Certificate Transparancy</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#HTTP-Public-Key-Pinning"><span class="toc-nav-text">HTTP Public Key Pinning</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#多余的加密套件"><span class="toc-nav-text">多余的加密套件</span></a></li></ol></div></aside></main><script>!function(){var e="https://static.sometimesnaive.org:9004/deps/imgs/banner.jpg";$("#article-banner").css({"background-image":"url("+e+")"}),$(".header").removeClass("fixed-header")}()</script><script>(function(){
    var gitmentConfig = "nanqinlang"
    if (gitmentConfig !== 'undefined') {
        var gitment = new Gitment({
            id: "66",
            owner: "nanqinlang",
            repo: "sometimesnaive.org",
            oauth: {client_id: "b0612de512484ab34c7a", client_secret: "c2bc4cd3c947097d2ccc4c16f120d50458314dd0"},
            theme: {render(state, instance){const container = document.createElement('div');container.lang="en-US";container.className='gitment-container gitment-root-container';container.appendChild(instance.renderHeader(state, instance));container.appendChild(instance.renderEditor(state, instance));container.appendChild(instance.renderComments(state, instance));container.appendChild(instance.renderFooter(state, instance));return container;}}
        })
        gitment.render(document.getElementById('comments'))
    }
})();</script><div class="scroll-top"><span class="arrow-icon"></span></div><footer class="app-footer"><p class="copyright" align="center">&copy; 2017 - 2018 南琴浪博客 <a>(sometimesnaive.org)<a></a></a></p></footer><script src="https://static.sometimesnaive.org:9004/deps/js/function.min.js" type="application/javascript"></script><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-108266909-1","auto"),ga("send","pageview")</script><script async src="https://www.google-analytics.com/analytics.js" type="application/javascript"></script></body></html><!-- rebuild by neat -->